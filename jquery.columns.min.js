/*!
 * jQuery Columns Plugin v1.0
 *
 * Date: Thu Aug 26 00:37:22 2010 -0400
 * Requires: jQuery v1.2.6+
 *
 * Copyright 2010, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * 
 * 
 *
*/
(function(e){e.fn.columns=function(m){var d=e.extend(true,{},e.fn.columns.defaults,m),n=Math.ceil,o=Math.floor,i={calculateWidths:function(b,c){if(d.autoWidth){var a=0;e.each(["paddingLeft","paddingRight","marginLeft","borderLeftWidth","borderRightWidth"],function(f,h){a+=parseInt(b.css(h),10)||0});a=a*d.columns+d.gutter*(d.columns-1);var g={width:o((c.containerWidth-a)/d.columns),marginRight:c.last?0:d.gutter};b.css(g)}},buildColumn:function(b,c){var a=e("<"+b.nname+' class="'+(b.cname+d.columnClass+
" "+d.columnClass+"-"+b.col)+'"></'+b.nname+">").append(e(c));i.calculateWidths(a,b);b.last&&a.addClass(d.columnClass+"-last last");a[b.insertType](b.wrapper);return a}},l={dl:function(b,c){b.each(function(a){var g=e(this).nextUntil("dt"),f=e(this);f=f.add(g);c.col=a+1;c.last=c.col==b.length;i.buildColumn(c,f)})},standard:function(b,c){var a=e([]),g=1;b.each(function(f){var h=n(c.length*c.col),j=f>=h-1||f>=c.klength-1,k=j&&this.nodeName=="DT";k||(a=a.add(this));if(j){c.last=f>=c.klength-1;f=i.buildColumn(c,
a);f[0].nodeName=="OL"&&c.col>1&&f.attr("start",g);a=e(k?this:[]);c.col++;g=h+1}})}};this.each(function(){var b=e(this),c=b.children(),a={nname:this.nodeName,cname:this.className?this.className+" ":"",col:1,containerWidth:b.width(),wrapper:b,insertType:"insertBefore",klength:c.length};a.length=a.klength/d.columns;if(d.columnWrapper){var g=d.columnWrapperClass;a.wrapper=e(d.columnWrapper).addClass(g+" "+g+"-"+d.columns).insertBefore(b);e.each(["paddingLeft","paddingRight","marginLeft","marginRight",
"borderLeftWidth","borderRightWidth"],function(f,h){a.containerWidth-=parseInt(a.wrapper.css(h),10)});a.insertType="appendTo"}g=c.filter("dt");a.nname=="DL"&&g.length<=d.columns?l.dl(g,a):l.standard(c,a);b.remove()});return this};e.fn.columns.defaults={columns:3,autoWidth:false,gutter:0,columnClass:"floatcols",columnWrapper:"<div></div>",columnWrapperClass:"column-wrapper"}})(jQuery);
